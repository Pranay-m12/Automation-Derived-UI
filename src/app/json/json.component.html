<div>
  <div>
    <br>
    <mat-slide-toggle (click)="toggleView()">JSON</mat-slide-toggle>
    <br>
    <div *ngIf="showTextbox" class="textbox row">
      <div class="col">
        <label for="source">Enter Source:</label>
        <input type="text" id="input1" placeholder="Enter Source Name" [(ngModel)]="source" />
      </div>
      <div class="col">
        <label for="type">Enter Type:</label>
        <input type="text" id="input1" placeholder="Enter Type" [(ngModel)]="type" />
      </div>
      <div class="col">
        <label for="input1">Enter Attributes:</label>
        <input type="text" id="input1" placeholder="Enter Attributes" [(ngModel)]="attributes" />
      </div>
      <div class="col">
        <label for="input2">Enter Derived Property:</label>
        <input type="text" id="input2" placeholder="Enter Dervied Property" [(ngModel)]="fields" />  
      </div>
    </div>
    <div *ngIf="!showTextbox" class="json row">
      <div class="col">
        <label for="input1">(Attributes):</label>
        <input type="file" (change)="onFileSelected($event)" />
      </div>
      <div class="col">
        <label for="input2">(Dervied):</label>
        <input type="file" (change)="onFileSelected1($event)" />  
      </div>
    </div>
    <button (click)="onClickTest()" style="width: 100%;">Execute</button>
  </div>

  <div style="width: 100%;">
    <div style="width: 80%;">
      <mat-slide-toggle (click)="toggleSearch()" style="margin-left: auto;">
      <input *ngIf="searchFieldBool" placeholder="Seach for field here" class="searchInput" #search (input)="searchField(search.value,true)"/>
      <input *ngIf="!searchFieldBool" placeholder="Seach for attribute here" class="searchInput" #search (input)="searchField(search.value,false)"/>
      </mat-slide-toggle>
    </div>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>Fields</th>
          <th> Prediction</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of searchtransformedJson"  [ngStyle]="{'background-color': r.predicted.length==0 ? 'rgba(233, 84, 84, 0.808)':''}">
          <td><input type="checkbox" [checked]="!uncheckedCheckboxes[r.id] && r.predicted.length!=0" (change)="toggleCheckbox(r.id)"/></td>
          <td>  <ng-container *ngIf="!r.editMode">{{r.id}}</ng-container>
            <input *ngIf="r.editMode" type="text" [(ngModel)]="r.id"/></td>
          <td> <ng-container *ngIf="!r.editMode">
            <button [ngClass]="['tablebutton',r.id,this.anotherArray[r.id]==field?'tablebutton-clicked':'tablebutton-notclicked']" 
              *ngFor="let field of r.predicted; let i = index" 
              (click)="addToAnotherArray(r.id, field)">
              {{field}}</button>
          </ng-container>
          <input *ngIf="r.editMode" type="text" [(ngModel)]="anotherArray[r.id]"/></td>
          <td>
            <button (click)="toggleEditMode(r,r.predicted.indexOf(anotherArray[r.id]))">{{ r.editMode ? 'Done' : 'Edit' }}</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  </div>

  <!-- [ngStyle]="{'background-color': isFieldClicked(r.id, field) ? 'rgb(79, 242, 87)' : (isFieldClicked(r.id, r.predicted[0]) ? 'yellow' : (i === 0 ? 'rgb(79, 242, 87)' : 'yellow'))}" (click)="addToAnotherArray(r.id, field)" -->
  